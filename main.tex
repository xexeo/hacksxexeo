\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage{csquotes}
\usepackage[brazilian]{babel}
\usepackage{xcolor}
\usepackage[rascunho,comentarios,anonimizar,assuntos]{hacksxexeo} 


\usepackage[citestyle=authoryear,articlein=false,
style=ext-authoryear-comp,natbib=true]{biblatex}
\addbibresource{biblio.bib}

\title{O Estilo hacksxexeo}
\author{Geraldo Xexéo}

%\defineauthorc{xexeo}{red}
 


\begin{document}




\maketitle
\thanks{Agradecimentos ao código original de Eduardo Mangeli, fartamente copiado, e estendido}

\section{Introdução}

Este é o pacote em evolução para fazer a edição de artigos dissertações e teses orientadas por Geraldo Xexéo.

O objetivo é ser um front-end para vários comandos, de forma que eu possa mudar os pacotes que uso e manter como os comentários são feitos.

A retro-compatibilidade é essencial.

\section{Como usar}

\begin{enumerate}
    \item Importar o arquivos hacksxexeo.sty para um diretório.
    \item Ativar as opções desejadas entre:
    \begin{enumerate}
        \item \verb!assuntos!,
        \item \verb!comentarios!,
        \item \verb!anonimizar!.
        \item \verb!rascunho!.
    \end{enumerate}
    \item Usar os comandos como explicado a seguir.
\end{enumerate}


\section{Assuntos}

Os assuntos são habilitados com a opção \verb!assuntos!. Caso ela não seja ativada, eles não apareceram.

O objetivo dos assuntos é identificar no topo de cada parágrafo sobre que assunto ele trata. Cada parágrafo só deve tratar de um assunto.

Esse comando deve ser melhorado no futuro para o visual ser mais interessante.

O comando é simples:

\begin{verbatim}
\xassunto[cor]{texto do assunto}
\end{verbatim}

A versão atual é bem feia e estou pensando em algo melhor. Ela coloca um texto com highlight, cujo default é verde, na posição.

Por exemplo, o comando:
\begin{verbatim}
\xassunto{Este é um assunto default}    
\end{verbatim}

Gera:

\xassunto{Este é um assunto default}      

Já o comando:
\begin{verbatim}
\xassunto[pink]{Este é um assunto rosa}   
\end{verbatim}

Gera:

\xassunto[pink]{Este é um assunto rosa}       

Uma lista de assuntos pode ser gerada com o comando
\verb!\listofassunto!. Um exemplo é dado no final desse texto.

\section{Anonimizador}

A opção anonimizar tem 3 comandos:
\begin{enumerate}
    \item \verb!\xanon{Texto}!
    \item \verb!\xanoncitep{entradabibtex}!
    \item \verb!\xanoncitet{entradabibtex}!
\end{enumerate}

Ela substitui o texto, ou a citação, pela palavra \textit{Anonymous}, ou uma citação como \textit{(Anonymous, Year)} ou \textit{Anonymous (Year)}.

Por exemplo, o ideal é que \xanon{Geraldo Xexéo} não seja citado. Nem quando falamos que \xanoncitet{costa_igualdade_2021} é um texto nosso, nem citando ele com parenteses\xanoncitep{costa_igualdade_2021}. Uma citação normal, como do \citet{Juran2010} continua aparecendo, as anonimizadas são suprimidas das referências.

\section{Comentários}

O maior esforço está sendo feito para criar uma comunicação via comentários entre orientador e aluno. 

Vários comandos foram criados, mas os que devem ser usados são:
\begin{enumerate}
\item \verb!\prof[texto a colorir]{comentário}!, pelo professor, ou
\item \verb!\profr[texto a colorir]{comentário}{rótulo}!, pelo professor, que permite dar um rótulo ao comentário, que deve ser único, 
\item \verb!\cand[texto a colorir]{comentário}!, pelo candidato.
\item \verb!\candr[texto a colorir]{comentário}{rótulo}!, pelo candidato, que permite dar um rótulo ao comentário, que deve ser único, 
\item \verb!\favorcitar[instrução adicional]!, que pede uma citação, possivelmente com instruções adicionais.
\end{enumerate}

Os comentários podem ser listados com o comando \verb!\listofcomentario!.

A subseção a seguir  tem alguns exemplos.

\subsection{Exemplos}

O primeiro exemplo é simples, apenas um comentário do professor\prof{Primeiro comentário é simples.}. O segundo comentário terá \prof[uma parte colorida]{O segundo exemplo é com uma parte marcada}. 

A marcação é suavizada em relação a cor definida. Atualmente o valor é de \makeatletter$\cor@suavizacao\%$\makeatother.

Um comentário do candidato é similar professor\cand{Primeira comentário do candidato é simples.}. A segunda citação tera \cand[uma parte colorida]{O quarto exemplo é com uma parte marcada}.

Finalmente, os rotulados, tanto para professor\profr{Exemplo rotulado}{Rot1}, como para candidato\candr{Olha a resposta}{Resposta para Rot1}. Que permitem também as versões \profr[com marcação]{Exemplo rotulado 2}{Rot2}, para \candr[ambos]{Olha a resposta 2}{Resposta para Rot2}.

Uma referência pode ser pedida em um lugar sem\favorcitar, ou com\favorcitar[o experimento].

\subsection{O comando de comentários avançado}

O comando \verb!hxcomment! é uma versão genérica do comando de comentário. Ele deve ser usado para criar comentários específicos para cada autor, na forma.

\begin{verbatim}
\newcommand{\xexeo}[2][]{\hxcomment[#1]{red}{Xexéo - #2}}
\end{verbatim}

Sua sintaxe é:
\begin{verbatim}
\hxcomment[texto a colorir]{cor}{comentário}
\end{verbatim}

\subsection{Ajustando valores}

Um valor que pode precisar ser ajustado é o espaço reservado aos números na frente das listas de comentários, assuntos ou necessidades de refência.

Isso é feito alterando um valor gerado automaticamente, e deve ser feito no documento (isso é, após \verb!\begin{document}!.

Os comandos possíveis são:
\begin{verbatim}
\setlength{\cftassuntonumwidth}{2.5em}
\setlength{\cftcomentarionumwidth}{2.5em}
\setlength{\cftcomentariorefnumwidth}{2.5em}
\end{verbatim}

\subsection{Trocando cores}
Cores podem ser trocadas redefinindo o valor das variáveis.
\begin{verbatim}
\makeatlettee=r
\renewcommand{\cor@prof}{red}
\renewcommand{\cor@cand}{blue}
\renewcommand{\cor@assunto}{green}
\renewcommand{\cor@citar}{purple}
\renewcommand{\cor@suavizacao}{50}
\makeatother
\end{verbatim}

\section{Rascunho}

A opção rascunho imprimirá rascunhos escritos dentro de um ambiente rascunho. Se não estiver habilitada os rascunhos não aparecerão.

\begin{verbatim}
\begin{rascunho}
texto
\end{rascunho}
\end{verbatim}

\begin{rascunho}
Esse é um exemplo de rascunho. Deve aparecer uma borda do lado interno de impressão.
\end{rascunho}

\section{Pacotes exigidos}

Os seguintes pacotes são exigidos:
\begin{itemize}
    \item xcolor, para usar as cores avançadas;
    \item soulutf8, para os \textit{highlights} e suportando utf-8;
    \item ed, para suportar os comentários
    \item tocloft, para definir as listas 
%    \item fit, cargo cult que chegou via Mangeli.
    \item xparse
\end{itemize}





%\section{Testes para o futuro}
%
%Um teste de colocar coisas na margem\namargem{Teste}\ednote[Xexéo]{Olá}\ednote[Xexéo 2]{Oi}.
%
\printbibliography

\setlength{\cftassuntonumwidth}{2.5em}
\setlength{\cftcomentarionumwidth}{2.5em}
\setlength{\cftcomentariorefnumwidth}{2.5em}
\newpage
\listofassunto
\newpage
\listofcomentario
\newpage
\listofcomentarioref
\end{document}
