\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hacksxexeo}[2021/04/20 - Para trabalhar com o orientador Geraldo Xexéo]

\newif\if@showcomentario\@showcomentariofalse
\DeclareOption{comentarios}{
    \@showcomentariotrue}

\newif\if@showcomentario\@showcomentariofalse
\DeclareOption{comentarios}{
    \@showcomentariotrue}

\newif\if@showassuntos\@showassuntosfalse
\DeclareOption{assuntos}{\@showassuntostrue}

\newif\if@beanonymous\@beanonymousfalse
\DeclareOption{anonimizar}{\@beanonymoustrue}

\ProcessOptions\relax
 
 
    
% Genérico
%\RequirePackage{color}
\RequirePackage{xcolor}
\RequirePackage{soulutf8 }
%para os comentários e a lista
\if@showcomentario
\RequirePackage[show]{ed}
\else
\RequirePackage{ed}
\fi
\RequirePackage{tocloft}
\RequirePackage[fit]{truncate}

% as opções comentario, assuntos e anonimizar




% Anonimização
%\def\xanonimizar{} %% set to true
%% or:

% Se anonimiza, escreve anonymous
% se não escreve o texto
\if@beanonymous
\newcommand{\xanon}[1]{Anonymous}
\newcommand{\xanoncitep}[1]{(Anonymous,Year)}
\newcommand{\xanoncitet}[1]{Anonymous (Year)}
\else
\newcommand{\xanon}[1]{#1}
\newcommand{\xanoncitep}[1]{\citep{#1}}
\newcommand{\xanoncitet}[1]{\citet{#1}}
\fi

%
% Assuntos colore o texto apenas, pode melhorar



% Cria a lista
\if@showassuntos
% cria o título
\newcommand{\listassunto}{Lista de Assuntos}
% cria a lista
\@ifundefined{chapter}{\newlistof[section]{assunto}{aaa}{\listassunto}}{\newlistof[chapter]{assunto}{aaa}{\listassunto}}
\else
% se não é para mostrar, não faz nada
\newcommand{\listofassunto}{}
\fi

% Esse comando é para isolar o pacote ed
% Que não atende todas as minhas expectativas
\if@showassuntos
\newcommand{\xassunto}[2][green]{
\refstepcounter{assunto}
\sethlcolor{#1}%
\hl{#2}
\par
\addcontentsline{aaa}{assunto}{\protect\numberline{\theassunto}{#2}}%
}
\else
\newcommand{\xassunto}[1]{}
\fi




% Agora vamos arrumar os comentários

% Cria a lista
\if@showcomentario
% cria o título
\newcommand{\listcomentario}{Lista de Comentários}
% cria a lista
\@ifundefined{chapter}{\newlistof[section]{comentario}{ccc}{\listcomentario}}{\newlistof[chapter]{comentario}{ccc}{\listcomentario}}
\else
% se não é para mostrar, não faz nada
\newcommand{\listofcomentario}{}
\fi

% Esse comando é para isolar o pacote ed
% Que não atende todas as minhas expectativas
\if@showcomentario
\newcommand{\xcomment}[3][]{
\refstepcounter{comentario}
\sethlcolor{#2}%
\hl{#1}%
\ednote{\textcolor{#2}{#3}}
\addcontentsline{ccc}{comentario}{\protect\numberline{\thecomentario}{#3}}%
}
\else
\newcommand{\xcomment}[3]{}
\fi

\if@showcomentario
\newcommand{\xcommentLabeled}[4][]{
\refstepcounter{comentario}
\sethlcolor{#2}%
\hl{#1}%
\ednote[#4]{\textcolor{#2}{#3}}
\addcontentsline{ccc}{comentario}{\protect\numberline{\thecomentario}{[#4] - #3}}%
}
\else
\newcommand{\xcommentLabeled}[4]{}
\fi



%\newcommand{\edx}[2]{\xcomment{\textcolor{#1}{#2}}}
\newcommand{\prof}[2][]{\xcomment[#1]{red}{#2}}
\newcommand{\cand}[2][]{\xcomment[#1]{blue}{#2}}
\newcommand{\profr}[3][]{\xcommentLabeled[#1]{red}{#2}{#3}}
\newcommand{\candr}[3][]{\xcommentLabeled[#1]{blue}{#2}{#3}}



\newcommand{\profsug}[1]{\textcolor{red}{#1}}
\newcommand{\candsug}[1]{\textcolor{blue}{#1}}

\newcommand{\favorcitar}[1][algo que suporte essa afirmação]{\prof{Por favor citar #1}}

\newcommand{\namargem}{\ed@margin{Teste}}