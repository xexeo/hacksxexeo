%%
%% This is file `hacksxexeo.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% hacksxexeo.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2021 by Geraldo Xexéo (xexeo@ufrj.br)
%% 
%% This file may be distributed and/or modified under the conditions of
%% the LaTeX Project Public License, either version 1.3 of this license
%% or (at your option) any later version.  The latest version of this
%% license is in:
%% 
%% http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX version
%% 2005/12/01 or later.
\NeedsTeXFormat{LaTeX2e}
\def\hx@version{v4.3.2}
\ProvidesPackage{hacksxexeo}[2021/05/18 \hx@version dtx version of hacksxexeo]
%%
%%
%%
%%
%%
%%
%%
%% \section{Implementation}
%% \subsection{Access to the current version}
\newcommand{\hacksxexeoversion}{\hx@version}%
\newcommand{\printhacksxexeoversion}{hacksxexeo v. \hacksxexeoversion}%
%%
%%
%% \subsection{Option Processing}
\newif\ifshowednotes\showednotestrue
\newif\ifmargins\marginstrue
\newif\ifmarginnote\marginnotefalse
\newif\ifednotebookmarks\ednotebookmarksfalse
\newif\if@showcomentario\@showcomentariofalse
\newif\if@naoanonimizar\@naoanonimizarfalse
\newif\if@showdraft\@showdraftfalse
\newif\if@showassuntos\@showassuntosfalse
\newif\if@showsugestao\@showsugestaofalse
\newif\if@beanonymous\@beanonymousfalse
\newif\if@showtodo\@showtodofalse
\newif\if@modoedicao\@modoedicaofalse
\newif\if@modosubmeter\@modosubmeterfalse
\newif\if@modopublicar\@modopublicarfalse
\newif\if@modopublicaraceitando\@modopublicaraceitandofalse
\DeclareOption{rascunhos}{\@showdrafttrue}
\DeclareOption{comentarios}{\@showcomentariotrue}
\DeclareOption{anonimizar}{\@beanonymoustrue}
\DeclareOption{naoanonimizar}{\@naoanonimizartrue}
\DeclareOption{sugestion}{\@showsugestaotrue}
\DeclareOption{assuntos}{\@showassuntostrue}
\DeclareOption{edicao}{\@modoedicaotrue}
\DeclareOption{submeter}{\@modosubmetertrue}
\DeclareOption{publicar}{\@modopublicartrue}
\DeclareOption{publicaraceitando}{
    \@modopublicartrue
    \@modopublicaraceitandotrue
}
\DeclareOption{show}{\showednotestrue\message{ed.sty: showing ednotes}}
\DeclareOption{hide}{\showednotesfalse\message{ed.sty: hiding ednotes}}
\DeclareOption{draft}{\showednotestrue\message{ed.sty: showing ednotes}}
\DeclareOption{final}{\showednotesfalse\message{ed.sty: hiding ednotes}}
\DeclareOption{nomargins}{\marginsfalse}
\DeclareOption{marginnote}{\marginnotetrue}
\DeclareOption{pdfbookmarks}{\ednotebookmarkstrue}
\DeclareOption{comments}{\@showcomentariotrue}
\DeclareOption{anonimize}{\@beanonymoustrue}
\DeclareOption{noanonimize}{\@naoanonimizartrue}
\DeclareOption{sugestions}{\@showsugestaotrue}
\DeclareOption{subjects}{\@showassuntostrue}
\DeclareOption{drafts}{\@showdrafttrue}
\DeclareOption{todos}{\@showtodotrue}
\DeclareOption{editing}{\@modoedicaotrue}
\DeclareOption{submetting}{\@modosubmetertrue}
\DeclareOption{publishing}{\@modopublicartrue}
\DeclareOption{acceptedpublishing}{
    \@modopublicartrue
    \@modopublicaraceitandotrue
}
\ProcessOptions\relax
\if@modoedicao
\@showassuntostrue
\@showdrafttrue
\@showcomentariotrue
\@showsugestaotrue
\@beanonymoustrue
\@showtodotrue
\fi
\if@modosubmeter
\@showassuntosfalse
\@showdraftfalse
\@showcomentariofalse
\@showsugestaofalse
\@beanonymoustrue
\@showtodofalse
\fi
\if@naoanonimizar
\@beanonymousfalse
\fi
\if@modopublicar
\@showassuntosfalse
\@showsugestaofalse
\@showdraftfalse
\@showcomentariofalse
\@beanonymousfalse
\@showtodofalse
\fi%
\if@showtodo
\@showcomentariotrue
\fi
\RequirePackage{xcolor}
\RequirePackage{soulutf8}
\RequirePackage[normalem]{ulem}
\RequirePackage{tocloft}
\RequirePackage{etoolbox}
\RequirePackage{environ}
\RequirePackage{xstring}
\RequirePackage{csquotes}
\RequirePackage{mdframed}
\ifshowednotes
%%\RequirePackage{paralist}
\ifmarginnote\RequirePackage{marginnote}\fi
\else
\RequirePackage{verbatim}
\fi%
\@ifpackageloaded{babel}%
{%  \message{Babel Loaded!}%
    \RequirePackage{iflang}%
}{%
    \message{Babel not detected!}%
}%
\ifednotebookmarks\RequirePackage{hyperref}\fi
\newcommand{\cor@prof}{red}%
\newcommand{\cor@cand}{blue}%
\newcommand{\cor@assunto}{green}%
\newcommand{\cor@citar}{purple}%
\newcommand{\cor@hldraft}{yellow}%
\@ifpackageloaded{babel}%
{%
    \IfLanguageName{brazilian}{\def\hxdrafttitle{draft}}{}%
    \IfLanguageName{portuguese}{\def\hxdrafttitle{draft}}{}%
    \IfLanguageName{english}{\def\hxdrafttitle{Draft}}{}%
    \IfLanguageName{brazilian}{\def\hxcommentstitle{Lista de Comentários}}{}%
    \IfLanguageName{portuguese}{\def\hxcommentstitle{Lista de Comentários}}{}%
    \IfLanguageName{english}{\def\hxcommentstitle{List of Comments}}{}%
    \IfLanguageName{brazilian}{\def\hxsugstitle{Lista de Sugestões}}{}%
    \IfLanguageName{portuguese}{\def\hxsugstitle{Lista de Sugestões}}{}%
    \IfLanguageName{english}{\def\hxsugstitle{List of Suggestions}}{}%
    \IfLanguageName{brazilian}{\def\hxsubjtitle{Lista de Assuntos}}{}%
    \IfLanguageName{portuguese}{\def\hxsubjtitle{Lista de Assuntos}}{}%    \IfLanguageName{english}{\def\hxsubjtitle{List of Subjects}}{}%

    \message{Babel detected!}
}{%
    \def\hxdrafttitle{Draft}%
    \def\hxcommentstitle{List of Comments}%
    \def\\hxsugstitle{List of Suggestions}%
    \def\hxsubjtitle{List of Subjects}%
    \message{No Babel!}
}%
\newcounter{hxnote}
\newcommand\hx@noteshape{\sffamily}
\def\hx@currentcolor{black}
%% footnote indicador e rótulo
\newcommand\ed@foot[3]% text, type, label
{\def\@test{#3}\footnotetext[\arabic{hxnote}]%
{{\scshape{\textcolor{\hx@currentcolor}{#2}}\if\@test\@empty\else\label{ed:#3}\textcolor{\hx@currentcolor}{[#3]}\fi\textcolor{\hx@currentcolor}{:}}\hx@noteshape \textcolor{\hx@currentcolor}{#1}}}%
\def\ed@mark@style#1{#1}%
\newcommand\ed@mark[1]{\ed@mark@style{\footnotemark[#1]}}%
\newcommand\ed@footnote[3]{\ed@mark{\arabic{hxnote}}\ed@foot{#1}{#2}{#3}}%
\newcommand\ed@margin[1]{\ifmargins\ifmarginnote\marginnote{\textcolor{\hx@currentcolor}{#1}}\else\marginpar{\textcolor{\hx@currentcolor}{#1}}\fi\fi}%
\newcommand\Hx@note[3]% text, type, label
{\addtocounter{hxnote}{1}\message{#2!}%
    \ifshowednotes\ed@footnote{#1}{#2}{#3}\ifednotebookmarks\belowpdfbookmark{#2: #1}{#2.\thehxnote}\fi\fi}%
\newcommand\hx@note[4]% text, type, label, margin
{\Hx@note{#1}{#2}{#3}\ifshowednotes\ed@margin{#4:\arabic{hxnote}}\fi}%
\newcommand\hxnote@label{Editor}%
\newcommand\hxnote@margin{Ed}%
\newcommand\hxnotelabel[1]{\def\hxnote@label{#1}}%
\newcommand\hxnotemargin[1]{\def\hxnote@margin{#1}}%
\newcommand{\Hxnote}[2][]{\Hx@note{#2}\hxnote@label{#1}}%
\newcommand{\hxnote}[3][]{\def\hx@currentcolor{#3}%
\hx@note{#2}\hxnote@label{#1}\hxnote@margin}%
%%%https://tex.stackexchange.com/questions/30483/how-can-i-check-in-latex-or-plain-tex-whether-a-command-exists-by-name
%% as opções comentario, assuntos e anonimizar
%% CORES
\newcommand{\cor@suavizacao}{40}%
\newcommand{\corleve}[1]{#1!\cor@suavizacao!white}
%% Problema de dar cor para o soul pode ser resolvido
%% Aqui mudando para o ulem
\newcommand{\hx@hll}[2]% % Depedendo do soulutf8
{\colorlet{x@coraqui}{\corleve{#1}}%
\sethlcolor{x@coraqui}%
\hl{#2}
%% \colorbox{\corleve{#1}}{#2}
}%
%% isolando o ednote
%% rótulo texto cor indicador
\newcommand{\hx@hxnote}[4][]{%
\hxnotelabel{#4}%
\hxnotemargin{#4}%
\hxnote[#1]{#2}{#3}%
}%
\newcommand{\hx@anoncitetext}{(Anonymous, Year)}%
\newcommand{\hx@anonciteptext}{(Anonymous, Year)}%
\newcommand{\hx@anoncitettext}{Anonymous (Year)}%
\newcommand{\hxdefanoncitetext}[1]{\renewcommand{\hx@anoncitetext}{#1}}%
\newcommand{\hxdefanonciteptext}[1]{\renewcommand{\hx@anonciteptext}{#1}}%
\newcommand{\hxdefanoncitettext}[1]{\renewcommand{\hx@anoncitettext}{#1}}%
\if@beanonymous
\newcommand{\hxanon}[1]{Anonymous}%
\newcommand{\hxanoncite}[2][]{\hx@anoncitetext}%
\newcommand{\hxanoncitep}[2][]{\hx@anonciteptext}%
\newcommand{\hxanoncitet}[2][]{\hx@anoncitettext}%
\else
\newcommand{\hxanon}[1]{#1}%
\newcommand{\hxanoncite}[2][]{\cite[#1]{#2}}%
\ifdef{\citep}{\newcommand{\hxanoncitep}[2][]{\citep[#1]{#2}}}{\newcommand{\hxanoncitep}[2][]{\cite[#1]{#2}}}%
\ifdef{\citet}{\newcommand{\hxanoncitet}[2][]{\citet[#1]{#2}}}{\newcommand{\hxanoncitet}[2][]{\cite[#1]{#2}}}%
\fi%|
%% retrocompatibilidade
\newcommand{\xanon}[2][]{\hxanon[#1]{#2}}%
\newcommand{\xanoncitep}[2][]{\hxanoncitep[#1]{#2}}%
\newcommand{\xanoncitet}[2][]{\hxanoncitet[#1]{#2}}%
\if@showassuntos
%% Cria a lista
%% cria o título
\newcommand{\listassunto}{\hxsubjtitle}%
%% cria a lista, depende do pacoto tcloft
 \@ifundefined{chapter}{\newlistof[section]{assunto}{aaa}{\listassunto}}{\newlistof[chapter]{assunto}{aaa}{\listassunto}}%
%%
\newcommand{\hxassunto}[2][\cor@assunto]{%
    \refstepcounter{assunto}%
    \sethlcolor{#1}%
    \hl{#2}%
    \par%
    \addcontentsline{aaa}{assunto}{\protect\numberline{\theassunto}{#2}}%
}%
\setlength{\cftassuntonumwidth}{2.5em}%
\else%
%% se não é para mostrar, não faz nada
\newcommand{\listofassunto}{}%
\newcommand{\hxassunto}[2][]{}%
\fi%| % @showassuntos
\newcommand{\xassunto}[2][\cor@assunto]{\hxassunto[#1]{#2}}
%%
\if@showcomentario
%% Resolve a lista de comentários
\newcommand{\listcomentario}{\hxcommentstitle}%
%% cria a lista
\@ifundefined{chapter}{\newlistof[section]{comentario}{ccc}{\listcomentario}}{\newlistof[chapter]{comentario}{ccc}{\listcomentario}}%%
%%
%% Comentador genérico - parte I
%% faz o hxnote e soma na lista
%% []rótulo], texto , cor, indicador
\newcommand{\hx@comentar}[4][]{%
    \ifstrempty{#4}{%
        % rótulo texto cor indicador
        \hx@hxnote[#1]{#2}{#3}{Comentário}% faz a nota de rodapé do ed
        \addcontentsline{ccc}{comentario}{\protect\numberline{\thecomentario}{#2}}%
    }%
    {%
        \hx@hxnote[#1]{#2}{#3}{#4}%
        \addcontentsline{ccc}{comentario}{\protect\numberline{\thecomentario}{#4: #2}}%
    }%
}%
%% comentador genérico, parte II
%% faz o highlight , soma o step e comenta
%% [texto hl] footnote cor indicator
\newcommand{\hx@comment}[4][]{%
    \refstepcounter{comentario}% soma um ao contador
    \hx@hll{#3}{#1}% ver subfunção de impressão com hl
    \hx@comentar{#2}{#3}{#4}%
}%
%%
%%
\newcommand{\hx@xcomment}[4][]{%
    \refstepcounter{comentario}% soma um ao contador
    \hx@hll{#3}{#1}% ver subfunção de impressão com hl
    \hx@comentar{\sout{#2}}{#3}{#4}%
}%
%%
%%
%% comentador genérico com rótulo
%% [texto hl] footnote cor  indicator rótulo
\newcommand{\hx@commentLabeled}[5][]{%
    \refstepcounter{comentario}%
    \hx@hll{#3}{#1}%
    \hx@comentar[#5]{#2}{#3}{#4}%
}%
%%
%% [texto hl] footnote cor  indicator rótulo
\newcommand{\hx@xcommentLabeled}[5][]{%
    \refstepcounter{comentario}%
    \hx@hll{#3}{#1}%
    \hx@comentar[#5]{\sout{#2}}{#3}{#4}%
}%
%%
\setlength{\cftcomentarionumwidth}{2.5em}
\else
\newcommand{\hx@comentar}[4][]{}%
\newcommand{\listofcomentario}{}%
%% não pode perder o texto comentado
\newcommand{\hx@comment}[4][]{#1}%
\newcommand{\hx@commentLabeled}[5][]{#1}%
\fi%|
%% comentário, cor, indicador, textovelho, cor velho, textonovo, cor novo
%% Em modo publicar coloca o textovelho
\if@showsugestao
\newcommand{\hx@gensug}[7][Uma proposta]{%
    \textcolor{#5}{\sout{#4}}% CORRIGINDO AQUI
    \textcolor{#7}{#6}%
    \if@showcomentario%
    \ifstrempty{#1}{}%
    {\refstepcounter{comentario}%
        \hx@comentar{#1}{#2}{#3}%% [rótulo], cor , footnote , indicador
    }%
    \fi%
}%% [rótulo], cor , footnote , indicador
\else%
\if@modopublicaraceitando
\newcommand{\hx@gensug}[7][]{#6}%
\else%
\newcommand{\hx@gensug}[7][]{#4}%
\fi%
\fi%
%%
%%
%%
%% reclamações sobre citações
%%
%%
\if@showcomentario%
%% cria o título
\newcommand{\listcomentarioref}{Necessidades de Citação}%
%% cria a lista
\@ifundefined{chapter}{ \newlistof[section]{comentarioref}{ccr}{\listcomentarioref}}{\newlistof[chapter]{comentarioref}{ccr}{\listcomentarioref}}%
\else%
%% se não é para mostrar, não faz nada
\newcommand{\listofcomentarioref}{}%
\fi%
\if@showcomentario%
\newcommand{\hx@commentref}[3][]{%
    \refstepcounter{comentarioref}%
    \hx@hll{#3}{#1}%
    \hx@hxnote{#2}{#3}{Citar}%
    \addcontentsline{ccr}{comentarioref}{\protect\numberline{\thecomentarioref}{#2}}%
}%
\setlength{\cftcomentariorefnumwidth}{2.5em}%
\else%
\newcommand{\hx@commentref}[3]{}%
\fi%
\if@showcomentario
\newcommand{\favorcitar}[1][algo que suporte essa afirmação]{%
    \hx@commentref{Por favor citar #1}{\cor@citar}}%
\else%
\newcommand{\favorcitar}[1][]{}%
\fi%
%%
%%
%%
%% Marcando ou esquendo dos drafts
%% Changebar foi removido porque é ruim
%%
\if@showdraft%
\NewEnviron{draft}[1][]{%
    \ifstrempty{#1}
    {\colorbox{\corleve{\cor@hldraft}}{\textbf{\hxdrafttitle}}}
    {\hx@hll{\cor@hldraft}{\textbf{#1}}}%
    \newline%
    \BODY%
}%
{}%
\surroundwithmdframed{draft}%
\else%
\NewEnviron{draft}[1][]{}{}%
\fi%
%% nome do autor, cor, identificador
\newcommand{\hxautor}[3]{%
%% hxcomment - texto a hl, cor, comentário, indicador de pessoa
\expandafter\newcommand\csname#1\endcsname[2][]%
{%
\hx@comment[##1]{##2}{#2}{#3}}%
\expandafter\newcommand\csname#1r\endcsname[3][]%
{\hx@commentLabeled[##1]{##2}{#2}{#3}{##3}}%
%% cortados
\expandafter\newcommand\csname#1x\endcsname[2][]%
{%
%% Comentários
\hx@xcomment[##1]{##2}{#2}{#3}}%
%% [texto a marcar], cor , comentário, palavra, rótulo
\expandafter\newcommand\csname#1rx\endcsname[3][]%
{\hx@xcommentLabeled[##1]{##2}{#2}{#3}{##3}}%
%% sugestões
\expandafter\newcommand\csname#1sug\endcsname[2][]%
{\hx@gensug[##1]{#2}{#3}{}{#2}{##2}{#2}}%
\expandafter\newcommand\csname#1rem\endcsname[2][]%
{\hx@gensug[##1]{#2}{#3}{##2}{#2}{}{#2}}
\expandafter\newcommand\csname#1troca\endcsname[3][]%
{\hx@gensug[##1]{#2}{#3}{##2}{#2}{##3}{#2}}%
}%
\hxautor{prof}{red}{Prof}
\hxautor{cand}{blue}{Cand}
\hxautor{hx@todoauthor}{orange}{TO DO}%
\newcommand{\hx@todobackgroundcolor}{orange}%
\newcommand{\hxdefinetodocolor}[1]{\renewcommand{\hx@todobackgroundcolor}{#1}}%
\newcommand{\todo}[2][comentar]{%
\IfEq{inline}{#1}%
{%
\begin{mdframed}[backgroundcolor=\hx@todobackgroundcolor]
#2%
\end{mdframed}%
}%
{%
\hx@todoauthor{#2}%
}%
}%
\let\rascunho=\draft
\endinput
%%
%% End of file `hacksxexeo.sty'.
